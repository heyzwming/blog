## 1.1 MATLAB系统环境

MATLAB的搜索路径：变量 -> 库函数 -> 程序文件 -> 当前文件夹 -> 文件搜索路径文件夹

例如：
```matlab
>> clear
>> x = sin(1)
x = 
    0.8415
>> sin = [1,2,3,4,5]
sin = 
    1   2   3   4   5
>> x = sin(1)
x = 
    1
```

## 1.2 MATLAB数值数据

### 1、 数值数据类型的分类

(1) 整型

* 无符号整数：8位、16位、32位、64位整数
* 带符号整数：...

其中

* 无符号8位整数数据范围为：$0 ～ 2^8-1$  
* 带符号8位整数数据范围为：$-2^7～2^7-1$

MATLAB可以通过适用数据类型转换函数来实现数据类型的转换。

例：
```matlab
>> x = int8(129)    % 带符号8位整数
x = 
    127     %带符号8位整型数据的最大值是127
>> x = uint8(129)
x = 
    129
```


(2) 浮点型  

* 单精度型：占用4个字节
* 双精度型：占用8个字节（精度更高），默认为双精度函数。


* single函数：将其他类型的数据转换为**单精度型**
* double函数：将其他类型的数据转换为**双精度型**

例如：
```matlab
>> class(4)     % 调用class函数得到4的数据类型
ans = 
double
>> class(single(4))
ans = 
single
```

(3) 复数型  

复数的实部和虚部默认为双精度型，虚数用i或j表示

* real函数：求复数的实部
* imag函数：求复数的虚部

例子：
```matlab
>> 6+5i
ans = 
    6.0000 + 5.0000i
>> 6+5j
ans = 
    6.0000 + 5.0000i
```

### 2、 数值数据的输出格式

使用format命令可以设置数值数据的输出格式：format 格式符


```matlab
>> format long 
>> 50/3
ans = 
16.66666666666668       % 长整型(long) 15位
>> format
>> 50/3
ans = 
16.6667     % 使用format命令默认为短整型short，4位

```

注意：format命令只影响数据输出格式，并不影响数据的计算和存储。

### 3、 常用数学函数

(1) 函数的调用格式：
    **函数名(函数自变量的值)**

函数自变量规定为矩阵变量，当然也可以是标量（标量是矩阵的一种特例）

函数在运算时是将函数逐项作用于矩阵的每一个元素上，所以最后运算的结果就是一个自变量同型的矩阵。

```matlab
>> A = [4,2; 3,6]
A = 
    4   2
    3   6

>> B = exp(A)   % 调用exp函数
B = 
    54.5982 7.3891
    ....    ....
```

(2) 常用函数的应用

1) 三角函数有**以弧度为单位**的函数和以角度为单位的函数，如果是**以角度为单位**的函数在函数名后加“d”

```matlab
>> sin(pi/2)
ans = 
    1
>> sind(90)
ans = 
    1
```

2) abs函数可以求实数的绝对值、复数的模、字符串的ASCII码值

```matlab
>> abs(-4)
ans = 
    4

>> abs(3+4i)
ans = 
    5

>> abs("a")
ans = 
    97

```

3) 用于取整的函数有fix、 floor、 ceil、 round

* round函数：四舍五入的规则
* ceil(天花板)函数：向上取整(取大于等于这个数的第一个整数)
* floor(地板)函数：向下取整(取小于等于这个数的第一个整数)
* fix函数：固定取靠近0的那个整数，也就是舍去小数取整



```matlab
>> round(4.7)
ans = 
    5

>> fix(-3.2)
ans = 
    -3

>> floor(3.6)
ans = 
    3

>> ceil(-3.8)
ans = 
    -3
```

4) 应用
   
* 分别求一个三位正整数的个位数字、十位数字和百位数字

使用rem函数取余数

```matlab
>> m = 345;
>> m1 = rem(m,10)
m1 = 
    5

>> m2 = rem(fix(m/10),10)
m2 =   
    4

>> m3 = fix(m/100)
m3 = 
    3
```

* 求[1,100]的所有素数

使用isprime函数，是素数返回1，否则返回0

```matlab
>> x = 1:100;
>> k = isprime(x);
>> k1 = find(k);    % 返回素数元素的序号
>> p = x(k1)

p =

  1 至 14 列

     2     3     5     7    11    13    17    19    23    29    31    37    41    43

  15 至 25 列

    47    53    59    61    67    71    73    79    83    89    97

>> 
```



## 1.3 变量及其操作

### 1、 变量与赋值语句

在MATLAB中变量名是**以字母开头**，后接字母、数字、下划线的字符序列，变量的名字**区分大小写**，且标准函数名以及命令名必须用**小写字母**

赋值语句两种格式：

* 变量 = 表达式
* 表达式

例如：  
计算表达式$\frac{5+cos 47°}{1+|x-y|}$的值，并赋值给z，其中$x = \sqrt7-2i$,$y = e^{\frac{\pi}{2}}$

```matlab
>> x = sqrt(7) - 2i;
>> y = exp(pi/2);
>> z = (5+cosd(47))/(1+abs(x-y))

z = 
    1.4395

```

### 2、 预定义变量

预定义变量是由系统本身定义的变量

* ans 是默认赋值变量
* i和j代表虚数单位
* pi代表圆周率
* NaN代表非数

有特定意义的预定义变量要避免被重新赋值




### 3、 变量的管理

1) 内存变量的删除与修改(工作区))

查看目前的变量
* who命令(显示所有的变量)

* whos命令(所有变量详细信息)

2) 内存变量文件

用于保存MATLAB工作区变量的文件叫做**内存变量文件**，其扩展名为.mat也叫MAT文件

* save命令：创建内存变量文件

* load命令：装入内存变量文件

```matlab
>> save mydata a x
>> load mydata
```

## 1.4 MATLAB矩阵的表示

### 1、 矩阵的建立

1) 利用直接输入法建立矩阵：将矩阵的元素用**中括号**括起来，按矩阵的顺序输入各元素，同一行的各元素之间用**逗号或空格**分隔，不同行的元素之间用**分号**分隔。

```matlab
>> A = [1,2,3; 4,5,6; 7,8,9]
A = 
    1   2   3
    4   5   6
    7   8   9
```

2) 利用已建好的矩阵建立更大的矩阵：一个大矩阵可以由已经建立好的小矩阵拼接而成。

```matlab
>> A = [1,2,3; 4,5,6; 7,8,9];
>> B = [-1,-2,-3; -4,-5,-6; -7,-8,-9];
>> C = [A,B; B,A]

C =

     1     2     3    -1    -2    -3
     4     5     6    -4    -5    -6
     7     8     9    -7    -8    -9
    -1    -2    -3     1     2     3
    -4    -5    -6     4     5     6
    -7    -8    -9     7     8     9
```

可以用实部矩阵和虚部构成复数矩阵

```matlab
>> B = [1,2,3; 4,5,6];
>> C = [6,7,8; 9,10,11];
>> A = B + i * C

A =

   1.0000 + 6.0000i   2.0000 + 7.0000i   3.0000 + 8.0000i
   4.0000 + 9.0000i   5.0000 +10.0000i   6.0000 +11.0000i
```


### 2、 冒号表达式

格式：
    e1:e2:e3

e1  为初始值  
e2  为步长  
e3  为终止值  

省略步长e2,则步长默认为1.

```matlab
>> t = 0:1:5
t = 
    0   1   2   3   4   5
```

也而可以使用linespace生成行向量

格式：
linespace(a,b,n)    a是第一个元素，b是最后一个元素，n是元素总数，当n省略自动产生100个元素

```matlab
>> x = linespace(0,pi,6)
x =     
    0   0.6283  1.2566  1.8850  2.5133  3.1416
```


### 3、 结构矩阵和单元矩阵

1) 结构矩阵

由多种不同类型项组成的实体,这些不同类型的数据是相互联系的

由结构数据构成的矩阵就是结构矩阵，结构矩阵里每一个元素就是结构数据类型

赋值方法的格式为：
结构矩阵元素.成员名 = 表达式

```matlab
>> a(1).x1 = 10;a(1).x2 = 'liu'; a(1).x3 = [11,21;34,78]
>> a(2).x1 = 12;a(2).x2 = 'wang'; a(2).x3 = [34,191;27,578]
>> a(3).x1 = 14;a(3).x2 = 'cai'; a(3).x3 = [13,890;67,231]
```

2) 单元矩阵

每一个元素直接由不同类型的元素构成

建立单元矩阵和一般矩阵相似，直接输入，只是单元矩阵元素用**大括号**括起来

```matlab
>> b = {10,'liu',[11,21;34,78]; ...; ...; }
b = 
    [10]    'liu'   [2x2 double]
    [12]    'wang'   [2x2 double]
    [14]    'cai'   [2x2 double]

```




## 1.5 矩阵元素的引用

### 1、 矩阵元素的引用方式

1) 通过下标来引用矩阵的元素

A(3,2)表示A矩阵第3行第2列的元素

```matlab
>> A(3,2) = 200

>> A = [1,2,3; 4,5,6];
>> A(4,5) = 10
A = 
    1   2   3   0   0
    4   5   6   0   0
    0   0   0   0   0
    0   0   0   0   10
```

注意：如果给出的行列下标大于原来矩阵的行数和列数，那么MATLAB将自动扩展原来的矩阵，并将扩展后没有赋值的矩阵元素置为0

2) 通过序号来引用

* 在MATLAB中，矩阵元素按列存储，即首先存储矩阵的第一列元素，然后存储第二列元素，···，一直到矩阵的最后一列元素
* 矩阵元素的序号就是矩阵元素在内存中的排列顺序

```matlab
>> A = [1,2,3; 4,5,6]
A = 
    1   2   3
    4   5   6  
>> A(3)
ans = 
    2
```

序号与下标一一对应，以mXn矩阵A为例，矩阵元素A(i,j)的序号为(j-1)*m+i

sub2ind函数：将矩阵中指定元素的行、列下标转换成存储的序号。  
D = sub2ind(S,I,J) 

D：序号  
S：行数和列数组成的向量  
I：转换矩阵的行下标  
J：转换矩阵的列标  

例子

```matlab
>> A = [1:3; 4:6]
A = 
    1   2   3
    4   5   6
>> D = sub2ind(size(A),[1,2; 2,2],[1,1;3,2])
D = 
    1   2
    6   4
```

ind2sub函数：将把矩阵元素的序号转换成对应的下标，其调用格式为：[I,J] = ind2sub(S,D)  

I:行下标  
J:列下标  
S:行数和列数组成的向量  
D:序号  

```matlab
>> [I,J] = ind2sub[3,3],[1,3,5] % 求一个三行三列矩阵的第1，3，5个元素的序号
I = 
    1   3   2
J =    
    1   1   2
```


### 2、 利用冒号表达式获得子矩阵

子矩阵是指由矩阵中的一部分元素构成的矩阵。

A(i,:)：          第i行的全部元素  
A(:,j)：          第j列的全部元素  
A(i:i+m,k:k+m)：  第i～i+m行内且在第k～k+m列中的所有元素  
A(iLi+m,:)：      第i～i+m行的全部元素  

```matlab
>> A = [1,2,3,4,5; 6,7,8,9,10; 11,12,13,14,15]

A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15

>> A(1:2,:)

ans =

     1     2     3     4     5
     6     7     8     9    10

>> A(2:3,1:2:5)

ans =

     6     8    10
    11    13    15

```

end运算符：表示某一维的末尾元素下标

```matlab
>> A = [1,2,3,4,5; 6,7,8,9,10;11,12,13,14,15;16,17,18,19,20]

A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15
    16    17    18    19    20

>> A(end,:)

ans =

    16    17    18    19    20

>> A([1,4],3:end)

ans =

     3     4     5

    18    19    20
```

### 3、 利用空矩阵删除矩阵的元素

空矩阵是指没有任何元素的矩阵

```matlab
>> x = []
x = 
    []
```

```matlab
>> A = [1,2,3,0,0;7,0,9,2,6;1,4,-1,1,8]

A =

     1     2     3     0     0
     7     0     9     2     6
     1     4    -1     1     8

>> A(:,[2,4]) = []

A =

     1     3     0
     7     9     6
     1    -1     8
```

### 4、 改变矩阵的形状

reshape(A,m,n):在矩阵总元素不变的情况下，将矩阵A重新排成mXn的二维矩阵

注意：reshape函数只是改变原矩阵的行数和列数，但不改变原矩阵的元素个数及存储顺序

```matlab
>> x = [23,45,65,34,65,34,98,45,78,65,43,76];
>> y = reshape(x,3,4)

y =

    23    34    98    65
    45    65    45    43
    65    34    78    76
```

A(:):将矩阵A的每一列元素堆叠起来，成为一个列向量

```matlab
>> A = [-45,65,71; 27,35,91]

A =

   -45    65    71
    27    35    91

>> B = A(:)

B =

   -45
    27
    65
    35
    71
    91
```

A(:)等价于reshape(A,6,1)


## 1.6 MATLAB基本运算

### 1、 算术运算

MATLAB的算术运算是在矩阵意义下进行的。

单个数据的算术运算只是矩阵运算的一种特例

1) 基本算术运算:+ 、 - 、 * 、 / (右除) 、 \ (左除) 、 ^(乘方)

* 加减运算：要求两个矩阵同型，运算时矩阵的相应元素相加减；当标量与矩阵进行加减运算时将标量和矩阵的每一个元素进行运算 
* 乘法运算：要求两个矩阵是可乘的，即大小、维数相容 
* 除法运算：分左右除运算，如果A矩阵是非奇异方阵，则B/A等效于B * inv(A)(A矩阵的逆右乘B矩阵), A\B等效于inv(A) * B

矩阵运算中，右除和左除表示两种不同的*除数矩阵*和*被除数矩阵*关系。

* 乘方运算：可以表示为A^x，要求x为标量

```matlab
>> A = [1,2,3;4,5,6;7,8,0];
>> A^2
ans = 
    30  36  15
    66  81  42 
    39  54  69
```

2) 点运算

* 点运算符：.* 、 ./ 、 .\ 、 .^
* 两矩阵进行点运算是指他们的对应元素进行相关运算，要求两矩阵同型。

```matlab
>> A = [1,2,3;4,5,6;7,8,9];
>> B = [-1,0,1; 1,-1,0; 0,1,1];
>> C = A.*B

C =

    -1     0     3
     4    -5     0
     0     8     9

>> D = A*B

D =

     1     1     4
     1     1    10
     1     1    16

```

例如：当x = 0.1,0.4,0.7,1时，分别求y = sinx cosx的值

```matlab
>> x = [0.1,0.4,0.7,1];
>> y = sin(x) .* cos(x)

y =

    0.0993    0.3587    0.4927    0.4546
```

### 2、 关系运算

* 关系运算符：< 、 <= 、 > 、 >= 、 == 、 ~=(不等于)
* 当两个比较量是标量时，直接比较两数的大小。

当参与比较的量是**两个同型的矩阵**时，比较是对两矩阵相同的位置的元素按标量关系运算规则逐个进行，最终的关系运算的结果是一个与原矩阵同型的矩阵，它的元素由0或1组成。

当参与比较的一个是标量而另一个是矩阵时，则把标量与矩阵的每一个元素按标量关系运算规则逐个比较，最终的关系运算的结果是一个与原矩阵同型的矩阵，它的元素由0或1组成。

例子：

```matlab
>> A = [24,35,13; 22,63,23; 39,47,80]

A =
    24    35    13
    22    63    23
    39    47    80
>> P = rem(A,2) == 0

P =
     1     0     0
     1     0     0
     0     0     1
```


### 3、 逻辑运算

逻辑运算符：&(与) 、 |(或) 、 ~(非)

* 在算术运算、关系运算和逻辑运算中，算术运算的优先级最高，逻辑运算优先级最低，但逻辑非运算是单目运算，它的运算级比双目运算高。

逻辑运算对矩阵的操作与比较运算符相似。


## 1.7 字符串处理




### 1、 字符串的表示

字符串是用单引号括起来的字符序列，一个字符串就是一个行向量。

```matlab
>> xm = 'Central South University'

>> xm(1:3)  % 取这个向量的第1到第3个字符

ans =

Cen

```

如果这个字符串中的字符含有单引号，则该单引号字符要用两个单引号来表示。

```matlab
>> 'I''m a teacher.'
ans = 
I'm a teacher.

```

建立多行字符串形成一个字符串矩阵的方法：

```matlab
>> ch = ['abcdef';'123456']

ch =

abcdef
123456

>> ch(2,3)

ans =

3
```


### 2、 字符串的操作

1) 字符串的执行

格式：eval(s)   % s是字符串

```matlab
>> t = pi

t =

    3.1416

>> m = '[t,sin(t),cos(t)]';
>> y = eval(m)

y =

    3.1416    0.0000   -1.0000 
```

2)  字符串与数值间的转换

* abs和double函数都可以用来获得字符串矩阵所对应的ASCII码数值矩阵
* char函数可以把ASCII码矩阵转换为字符串矩阵

```matlab
>> s1 = 'MATLAB';
>> a = abs(s1)

a =

    77    65    84    76    65    66

>> char(a+32)
ans =
    matlab

```



3)  字符串的比较

方法：利用关系运算符或字符串比较函数

* 关系运算符比较：两个字符串里的每个字符依次按ASCII值大小逐个进行比较，比较的结果是一个数值向量，向量中的元素要么1，要么0

```matlab
>> 'www0'>='W123'

ans =

     1     1     1     0
```

* 字符串比较函数：

1、strcmp(s1,s2):用于比较字符串s1和s2是否相等

2、strncmp(s1,s2,n):用于比较两个字符串前n个字符是否相等

3、strcmpi(s1,s2):在忽略大小写前提下，用于比较字符串s1和s2是否相等

4、strncmpi(s1,s2,n):在忽略大小写前提下，用于比较两个字符串前n个字符是否相等


4) 字符串的查找与替换

* findstr(s1,s2):返回短字符串在长字符串中的开始位置

* strrep(s1,s2,s3):将字符串s1中所有的子字符串s2替换为字符串


```matlab
>> p = findstr('This is a test!','is')

p =

     3     6
>> p = findstr('This is a test!','is')

p =

     3     6
>> result = strrep('This is a test!','test','class')

result =

This is a class!
```